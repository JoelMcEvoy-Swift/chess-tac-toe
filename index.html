<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chess-Tac-Toe</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- OPTIONS OVERLAY -->
  <div id="options-overlay" class="overlay">
    <div class="modal">
      <h1 class="menu-title">Chess-Tac-Toe</h1>
      <h2>Game Options</h2>

      <!-- ONLINE MULTIPLAYER -->
      <div class="opt">
        <div class="opt-title">Online multiplayer (beta)</div>

        <div class="online-grid">
          <button id="create-room-btn" class="control-btn" type="button">Create room</button>

          <div class="join-row">
            <input id="join-code" type="text" placeholder="Enter code" maxlength="8" />
            <button id="join-room-btn" class="control-btn" type="button">Join</button>
          </div>
        </div>

        <div id="online-status" class="small">
          Offline mode (local game)
        </div>

        <div id="room-pill" class="room-pill hidden">
          Room: <span id="room-code-text"></span> · You are <span id="role-text"></span>
        </div>

        <button id="swap-sides-btn" class="control-btn" type="button" disabled>Swap colours (restart)</button>
        </div>
      

      <!-- PIECES -->
      <div class="opt">
        <div class="opt-title">Piece selection</div>

        <label class="radio-row">
          <input type="radio" name="opt-pieces" value="classic" checked>
          Classic (Pawn, Rook, Bishop, Knight)
        </label>

        <label class="radio-row">
          <input type="radio" name="opt-pieces" value="custom">
          Custom
        </label>

        <div id="custom-pieces" class="subpanel hidden">
          <div class="small">Choose 4 pieces (duplicates allowed)</div>
          <div class="custom-grid">
            <select class="piece-pick"></select>
            <select class="piece-pick"></select>
            <select class="piece-pick"></select>
            <select class="piece-pick"></select>
          </div>
        </div>
      </div>

      <!-- CLOCK -->
      <div class="opt">
        <div class="opt-title">Clock</div>

        <label class="radio-row">
          <input type="radio" name="opt-clock" value="off" checked>
          Off
        </label>

        <label class="radio-row">
          <input type="radio" name="opt-clock" value="on">
          On
        </label>

        <div id="clock-rules" class="subpanel hidden">
          <label class="row">
            Time per player (seconds)
            <input id="clock-seconds" type="number" min="10" step="10" value="180">
          </label>

          <label class="row">
            Increment per move (seconds)
            <input id="clock-increment" type="number" min="0" step="1" value="0">
          </label>
        </div>
      </div>

      <!-- OPENING PHASE -->
      <div class="opt">
        <div class="opt-title">Opening phase</div>

        <label class="row">
          Turns before movement (per player)
          <input id="opening-turns" type="number" min="0" step="1" value="0">
        </label>

        <div class="small">
          During the opening phase, you may only place pieces from reserve. Movement unlocks once both players have completed this many turns.
        </div>
      </div>

      <!-- ORIENTATION -->
      <div class="opt">
        <div class="opt-title">Black orientation</div>
        <label class="radio-row">
          <input id="flip-black" type="checkbox">
          Flip Black UI (180°)
        </label>
      </div>

      <div class="actions">
        <button id="start-btn" type="button">Start game</button>
      </div>

      <!-- RULES -->
      <div class="opt">
        <div class="opt-title">How to play</div>

        <div class="rules">
          <p>
            Chess-Tac-Toe is a two-player strategy game played on a 4×4 board.
            Players take turns placing and moving chess pieces to form a line of four.
          </p>

          <ul>
            <li>Each player starts with a reserve of pieces.</li>
            <li>On your turn, you may either place a piece from your reserve onto an empty square, or move one of your pieces already on the board.</li>
            <li>During the opening phase (if enabled), pieces may not be moved until both players have completed the required number of turns.</li>
            <li>Pieces move and capture using their standard chess movement rules.</li>
            <li>Pawns face all directions.</li>
            <li>Capturing a piece returns it to its owner’s reserve.</li>
            <li>The first player to form a straight line of four pieces (horizontal, vertical, or diagonal) wins.</li>
            <li>If the board fills with no winner, the game is a draw.</li>
          </ul>

          <p>
            If the clock is enabled, a player loses immediately if their time runs out.
          </p>
        </div>
      </div>

    </div>
  </div>

  <!-- BLACK -->
  <div class="reserve-wrap">
    <div id="black-clock" class="clock hidden">03:00</div>
    <div id="black-reserve" class="reserve"></div>
  </div>

  <!-- BOARD -->
  <div id="board"></div>

  <!-- WHITE -->
  <div class="reserve-wrap">
    <div id="white-reserve" class="reserve"></div>
    <div id="white-clock" class="clock hidden">03:00</div>
  </div>

  <!-- CONTROLS -->
  <div class="controls">
    <button id="menu-btn" class="control-btn" type="button">Menu</button>
    <button id="restart-btn" class="control-btn" type="button">Restart</button>
  </div>

  <div id="status"></div>

  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
